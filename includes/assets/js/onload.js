function getUrlVars(){for(var e,t=[],n=window.location.href.split("#")[0].slice(window.location.href.indexOf("?")+1).split("&"),o=0;o<n.length;o++)e=n[o].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function getFormObj(e){var t={},n=$(e).serializeArray();return $.each(n,function(e,n){t[n.name]=n.value}),t}$(document).ready(function(){var e=getUrlVars().opt,t=getUrlVars().cg,n=-1!==document.referrer.indexOf("facebook"),o=-1!==document.referrer.indexOf("twitter");function r(e,n){var o=new XMLHttpRequest,r="",a="";"prefill"===e?(r="GET_FIRST_NAME_EMAIL",a=t):"teller"===e&&(r="CAMP_TTL_PETITIONS",a=n.tellerCode),o.open("POST","https://www.mygreenpeace.nl/GPN.WebServices/WIDSService.asmx",!0);var i='<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">  <soap:Body>    <WatIsDestand xmlns="http://www.mygreenpeace.nl/GPN.WebServices/">      <queryId>'+r+"</queryId>      <requestValue>"+a+"</requestValue>    </WatIsDestand>  </soap:Body></soap:Envelope>";o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){var t=o.responseXML.getElementsByTagName("WatIsDestandResult")[0].firstChild.nodeValue;if(""!==t){var r=t.split("|");if("prefill"===e){var a=r[0];$(n).find("input[name='name']").val(a);var i=r[1];$(n).find("input[name='mail']").val(i)}else"teller"===e&&function(e,t){let n=t.parentNode;if(e>=t.counter_min){$(n).find(".counter").show();var o=Math.round(e/t.counter_max*100);e>=t.counter_max&&(o=100),$(n).find(".counter__slider").animate({width:o+"%",opacity:1},2e3,"easeInOutCubic"),$(n).find(".counter__gettext").html(e.toLocaleString("nl-NL")+" "+t.counter_text),$(n).find(".counter__text").fadeIn(2e3)}}(Number(r[0]),n)}}},o.setRequestHeader("Content-Type","text/xml"),o.setRequestHeader("SOAPAction","http://www.mygreenpeace.nl/GPN.WebServices/WatIsDestand"),o.send(i)}null!=e&&0!=$(".optin").length&&"in"==e&&($(".optin").hide(),$(".gpnl-petition-checkbox").prop("checked",!0),$("input[name='mail']").keyup(function(){if(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(this.value)){let e=encodeURIComponent(this.value);$.ajax({type:"GET",url:"https://secure.greenpeacephp.nl/kenikdeze.php?mail="+e,complete:function(e){e.responseText.includes("false")&&($(".optin").show(),$(".gpnl-petition-checkbox").prop("checked",!1))}})}})),$(".gpnl-petitionform").each(function(){var e="petition_form_object_"+getFormObj(this).form_id;this.tellerCode=window[e].analytics_campaign,this.counter_min=Number(window[e].countermin),this.counter_max=Number(window[e].countermax),this.counter_text=window[e].countertext,r("teller",this)}),o||n||r("prefill",this),$.ajax({type:"HEAD",url:"whatsapp://send?text=text=Hello%20World!",success:function(){window.location="whatsapp://send?text=text=Hello%20World!"},error:function(){$(".gpnl-share-whatsapp").toggle()}})});
//# sourceMappingURL=maps/onload.js.map
