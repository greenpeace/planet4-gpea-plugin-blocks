"use strict";function getUrlVars(){for(var e,t=[],n=window.location.href.split("#")[0].slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<n.length;r++)e=n[r].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function getFormObj(e){var n={},t=$(e).serializeArray();return $.each(t,function(e,t){n[t.name]=t.value}),n}$(document).ready(function(){var e=getUrlVars().opt,r=getUrlVars().cg,t=-1!==document.referrer.indexOf("facebook"),n=-1!==document.referrer.indexOf("twitter"),a=getUrlVars().clangct;function i(a,i){var o=new XMLHttpRequest,e="",t="";"prefill"===a?(e="GET_FIRST_NAME_EMAIL",t=r):"teller"===a&&(e="CAMP_TTL_PETITIONS",t=i.tellerCode),o.open("POST","https://www.mygreenpeace.nl/GPN.WebServices/WIDSService.asmx",!0);var n='<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">  <soap:Body>    <WatIsDestand xmlns="http://www.mygreenpeace.nl/GPN.WebServices/">      <queryId>'+e+"</queryId>      <requestValue>"+t+"</requestValue>    </WatIsDestand>  </soap:Body></soap:Envelope>";o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){var e=o.responseXML.getElementsByTagName("WatIsDestandResult")[0].firstChild.nodeValue;if(""!==e){var t=e.split("|");if("prefill"===a){var n=t[0];$(i).find("input[name='name']").val(n);var r=t[1];$(i).find("input[name='mail']").val(r)}else"teller"===a&&function(e,t){var n=t.parentNode;if(e>=t.counter_min){$(n).find(".counter").show();var r=Math.round(e/t.counter_max*100);e>=t.counter_max&&(r=100),$(n).find(".counter__slider").animate({width:r+"%",opacity:1},2e3,"easeInOutCubic"),$(n).find(".counter__gettext").html(e.toLocaleString("nl-NL")+" "+t.counter_text),$(n).find(".counter__text").fadeIn(2e3)}}(Number(t[0]),i)}}},o.setRequestHeader("Content-Type","text/xml"),o.setRequestHeader("SOAPAction","http://www.mygreenpeace.nl/GPN.WebServices/WatIsDestand"),o.send(n)}null!=a&&$.ajax({url:"/wp-content/plugins/planet4-gpnl-plugin-blocks/includes/assets/js/clang-landing.js?clangct="+a,dataType:"script"}),null!=e&&0!=$(".optin").length&&"in"==e&&($(".optin").hide(),$(".gpnl-petition-checkbox").prop("checked",!0),$("input[name='mail']").keyup(function(){if(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(this.value)){var e=encodeURIComponent(this.value);$.ajax({type:"GET",url:"https://secure.greenpeacephp.nl/kenikdeze.php?mail="+e,complete:function(e){e.responseText.includes("false")&&($(".optin").show(),$(".gpnl-petition-checkbox").prop("checked",!1))}})}}),n||t||i("prefill",this)),$(".gpnl-petitionform").each(function(){var e="petition_form_object_"+getFormObj(this).form_id;this.tellerCode=window[e].analytics_campaign,this.counter_min=Number(window[e].countermin),this.counter_max=Number(window[e].countermax),this.counter_text=window[e].countertext,i("teller",this)})});
//# sourceMappingURL=maps/onload.js.map
