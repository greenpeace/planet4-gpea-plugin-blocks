function getUrlVars(){for(var e,t=[],n=window.location.href.split("#")[0].slice(window.location.href.indexOf("?")+1).split("&"),a=0;a<n.length;a++)e=n[a].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function getFormObj(e){var t={},n=$(e).serializeArray();return $.each(n,function(e,n){t[n.name]=n.value}),t}$(document).ready(function(){var e=getUrlVars().opt,t=getUrlVars().cg,n=-1!==document.referrer.indexOf("facebook"),a=-1!==document.referrer.indexOf("twitter");let i=getUrlVars().clangct;function r(e,n){var a=new XMLHttpRequest,i="",r="";"prefill"===e?(i="GET_FIRST_NAME_EMAIL",r=t):"teller"===e&&(i="CAMP_TTL_PETITIONS",r=n.tellerCode),a.open("POST","https://www.mygreenpeace.nl/GPN.WebServices/WIDSService.asmx",!0);var o='<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">  <soap:Body>    <WatIsDestand xmlns="http://www.mygreenpeace.nl/GPN.WebServices/">      <queryId>'+i+"</queryId>      <requestValue>"+r+"</requestValue>    </WatIsDestand>  </soap:Body></soap:Envelope>";a.onreadystatechange=function(){if(4===a.readyState&&200===a.status){var t=a.responseXML.getElementsByTagName("WatIsDestandResult")[0].firstChild.nodeValue;if(""!==t){var i=t.split("|");if("prefill"===e){var r=i[0];$(n).find("input[name='name']").val(r);var o=i[1];$(n).find("input[name='mail']").val(o)}else"teller"===e&&function(e,t){let n=t.parentNode;if(e>=t.counter_min){$(n).find(".counter").show();var a=Math.round(e/t.counter_max*100);e>=t.counter_max&&(a=100),$(n).find(".counter__slider").animate({width:a+"%",opacity:1},2e3,"easeInOutCubic"),$(n).find(".counter__gettext").html(e.toLocaleString("nl-NL")+" "+t.counter_text),$(n).find(".counter__text").fadeIn(2e3)}}(Number(i[0]),n)}}},a.setRequestHeader("Content-Type","text/xml"),a.setRequestHeader("SOAPAction","http://www.mygreenpeace.nl/GPN.WebServices/WatIsDestand"),a.send(o)}null!=i&&$.ajax({url:"/wp-content/plugins/planet4-gpnl-plugin-blocks/includes/assets/js/clang-landing.js?clangct="+i,dataType:"script"}),null!=e&&0!=$(".optin").length&&"in"==e&&($(".optin").hide(),$(".gpnl-petition-checkbox").prop("checked",!0),$("input[name='mail']").keyup(function(){if(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(this.value)){let e=encodeURIComponent(this.value);$.ajax({type:"GET",url:"https://secure.greenpeacephp.nl/kenikdeze.php?mail="+e,complete:function(e){e.responseText.includes("false")&&($(".optin").show(),$(".gpnl-petition-checkbox").prop("checked",!1))}})}}),a||n||r("prefill",this)),$(".gpnl-petitionform").each(function(){var e="petition_form_object_"+getFormObj(this).form_id;this.tellerCode=window[e].analytics_campaign,this.counter_min=Number(window[e].countermin),this.counter_max=Number(window[e].countermax),this.counter_text=window[e].countertext,r("teller",this)})});
//# sourceMappingURL=maps/onload.js.map
