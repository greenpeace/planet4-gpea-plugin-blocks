{"version":3,"sources":["gpnl-newsletter.js"],"names":["getFormObj","el","formObj","inputs","$","serializeArray","each","i","input","name","value","toggleDisable","prop","on","console","newsletter_form_element","post_form_value","this","action","nonce","window","form_config","marketingcode","literaturecode","screenid","type","find","data","success","url","ajaxUrl","error","log"],"mappings":"aA2CG,SAFDA,WAAAC,GAGA,IAAAC,EAAA,GAGFC,EAAAC,EAAAH,GAAAI,iBAEEJ,OARAG,EAAEE,KAAKH,EAAQ,SAAUI,EAAGC,GAC1BN,EAAQM,EAAMC,MAAQD,EAAME,QAO9BR,EADF,SAASS,cAAcV,GACrBA,EAAGW,KAAK,YAAaX,EAAGW,KAAK,aAjD/BR,EAAE,0BAA0BS,GAAG,SAAU,WAEvCC,QAAIC,IAAAA,MAGJ,IAAIC,EAAkBhB,WALOiB,MAKzBD,EAAAA,0BAA6BD,EAAjC,QAGAC,EAAgBE,OAAS,0BACzBF,EAAgBG,MAASC,OAAOC,GAAaF,MAC7CH,EAAgBM,cAAiBF,OAAOC,GAAaC,cACrDN,EAAgBO,eAAkBH,OAAOC,GAAaE,eACtDP,EAAgBQ,SAAYJ,OAAOC,GAAaG,SAIhDb,QAAAA,IAAAA,GAGEc,cADKrB,EAlBsBa,MAkBtBS,KAAA,MAGLC,EAAAA,KAAI,CACJC,KAAS,OACPC,IAAAT,OAAAC,GAAAS,QACAhB,KAAOE,EACPF,QAAO,SAAPa,GAEFI,QAAOC,IAAA,OACLlB,QAAAkB,IAAAL,IAEAb,MAAAA,SAAYa,GAZhBb,QAAAkB,IAAA,OAmBFlB,QAAAkB,IAAAL","file":"../gpnl-newsletter.js","sourcesContent":["$('.gpnl-newsletter__form').on('submit', function () {\n\n  var newsletter_form_element = this;\n  console.log(this);\n  // Get the  parameter from the newsletter form and add the action and CSRF protection\n  var post_form_value = getFormObj(newsletter_form_element);\n  var form_config = 'newsletter_form_object_' + post_form_value['form_id'];\n\n  post_form_value.action = 'newsletter_form_process';\n  post_form_value.nonce  = window[form_config].nonce;\n  post_form_value.marketingcode  = window[form_config].marketingcode;\n  post_form_value.literaturecode  = window[form_config].literaturecode;\n  post_form_value.screenid  = window[form_config].screenid;\n\n  console.log(post_form_value);\n\n  toggleDisable($(newsletter_form_element).find('*'));\n\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function(data) {\n      // eslint-disable-next-line no-console\n      console.log('^-^');\n      console.log(data);\n    },\n    error: function(data){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      // eslint-disable-next-line no-console\n      console.log('o_o');\n      console.log(data);\n    }\n  });\n\n});\n\n// Get the key+value from the input fields in the form\nfunction getFormObj(el) {\n  var formObj = {};\n  var inputs = $(el).serializeArray();\n  $.each(inputs, function (i, input) {\n    formObj[input.name] = input.value;\n  });\n  return formObj;\n}\n\n// Toggle the disabled state on form elements\nfunction toggleDisable(el) {\n  el.prop('disabled', !el.prop('disabled'));\n\n}\n"]}