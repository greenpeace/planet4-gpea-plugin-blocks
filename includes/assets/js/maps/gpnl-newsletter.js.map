{"version":3,"sources":["gpnl-newsletter.js"],"names":["newsletter_form_element","getFormObj","el","formObj","inputs","toggleDisable","each","prop","input","name","value","$","on","post_form_value","action","nonce","window","form_config","marketingcode","literaturecode","screenid","type","find","data","success","url","ajaxUrl","console","log","hide","error","html","append","location","href"],"mappings":"aAAA,IAAIA,wBAA0B,GA6C9B,SAASC,WAAWC,GAClB,IAAIC,EAAU,GAShBC,EAASC,EAAAA,GAAAA,iBAJP,OAKAH,EAAEI,KAAFF,EAAQ,SAAgBG,EAAHC,GAEtBL,EAAAK,EAAAC,MAAAD,EAAAE,QAPQP,EAIT,SAASE,cAAcH,GACrBA,EAAGK,KAAK,YAAaL,EAAGK,KAAK,aAvD/BI,EAAE,0BAA0BC,GAAG,SAAU,WAIvC,IAAIC,EAAkBZ,WAJtBD,wBAA0BY,MAItBC,EAAAA,0BAA6Bb,EAAjC,QAGAa,EAAgBC,OAAS,0BACzBD,EAAgBE,MAASC,OAAOC,GAAaF,MAC7CF,EAAgBK,cAAiBF,OAAOC,GAAaC,cACrDL,EAAgBM,eAAkBH,OAAOC,GAAaE,eACtDN,EAAgBO,SAAYJ,OAAOC,GAAaG,SAM9CC,cADKV,EAAAX,yBAAAsB,KAAA,MAGLC,EAAAA,KAAI,CACJC,KAAS,OACPC,IAAAT,OAAAC,GAAAS,QACAC,KAAOd,EACPF,QAAEX,WAEFW,QAAEiB,IAAA,OATCjB,EAAAX,yBAAAsB,KAAA,KAAAO,OAYLC,EAAAA,2BAAiBC,KAAA,6BACfpB,EAAA,iCAAAoB,KAAA,oFAGApB,MAAEX,WAGFW,QAAEX,IAAAA,OAGHW,EAAAX,yBAAAsB,KAAA,KAAAO,OAtBHlB,EAAA,2BAAAoB,KAAA,WA2BFpB,EAAA,iCAAAoB,KAAA,6CARMpB,EAAEX,yBAAyBgC,OASjC,YAAoB9B,OAAI+B,SAAAC,KAAA","file":"../gpnl-newsletter.js","sourcesContent":["var newsletter_form_element = {};\n$('.gpnl-newsletter__form').on('submit', function () {\n\n  newsletter_form_element = this;\n  // Get the  parameter from the newsletter form and add the action and CSRF protection\n  var post_form_value = getFormObj(newsletter_form_element);\n  var form_config = 'newsletter_form_object_' + post_form_value['form_id'];\n\n  post_form_value.action = 'newsletter_form_process';\n  post_form_value.nonce  = window[form_config].nonce;\n  post_form_value.marketingcode  = window[form_config].marketingcode;\n  post_form_value.literaturecode  = window[form_config].literaturecode;\n  post_form_value.screenid  = window[form_config].screenid;\n\n\n  toggleDisable($(newsletter_form_element).find('*'));\n\n  $.ajax({\n    type:    'POST',\n    url:     window[form_config].ajaxUrl,\n    data:    post_form_value,\n    success: function() {\n      // eslint-disable-next-line no-console\n      console.log('^-^');\n      $(newsletter_form_element).find('*').hide();\n      $('.gpnl-newsletter__title').html('Hoera, je bent er bijna! ');\n      $('.gpnl-newsletter__description').html('<h4>Bevestig je aanmelding via de mail die je van ons ontvangt. Bedankt!  </h4>');\n\n    },\n    error: function(){\n      // If the backend sends an error, hide the thank element and show an error urging to try again\n      // eslint-disable-next-line no-console\n      console.log('o_o');\n      $(newsletter_form_element).find('*').hide();\n      $('.gpnl-newsletter__title').html('Oh nee!');\n      $('.gpnl-newsletter__description').html('<p>Hier gaat helaas iets mis, sorry. </p>');\n      $(newsletter_form_element).append(\n        '<a href=\\''+window.location.href +'\\' class=\"btn btn-primary btn-block\"' +\n        '\">Probeer je het nog eens? </a>');\n    }\n  });\n\n});\n\n// Get the key+value from the input fields in the form\nfunction getFormObj(el) {\n  var formObj = {};\n  var inputs = $(el).serializeArray();\n  $.each(inputs, function (i, input) {\n    formObj[input.name] = input.value;\n  });\n  return formObj;\n}\n\n// Toggle the disabled state on form elements\nfunction toggleDisable(el) {\n  el.prop('disabled', !el.prop('disabled'));\n\n}\n"]}